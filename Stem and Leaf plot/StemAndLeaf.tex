\documentclass[a4paper]{book}

\usepackage{pgf}
\usepackage{tikz}
\usepackage{ifthen}


\newcommand{\stemNleaf}[6]{
	\newcounter{leafer}
	\setcounter{leafer}{-1}
	\ifthenelse{\equal{#4}{}}{\color{black}}{\color{#4}}
	\foreach \xi in #2 {
		\pgfmathparse{int(\xi/#1)}
		\ifthenelse{\pgfmathresult = \value{leafer}}
		{
			\setcounter{leafer}{\pgfmathresult}
		}
		{
			\setcounter{leafer}{\pgfmathresult}
			\theleafer
			\ifthenelse{\equal{#6}{}}{\color{black}}{\color{#6}}
			$\mid$$
			\ifthenelse{\equal{#5}{}}{\color{black}}{\color{#5}}
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer = \pgfmathresult}{\pgfmathparse{round(Mod(\j,#1)*#3)}\pgfmathresult,}
			}$ \par
		}
    
    } \par
	\color{black}
}

\newcommand{\fractionalStemNleaf}[5]{
	\newcounter{leafer}
	\setcounter{leafer}{-1}
	\ifthenelse{\equal{#3}{}}{\color{black}}{\color{#3}}
	\foreach \xi in #2 {
		\pgfmathparse{int(\xi/#1)}
		\ifthenelse{\pgfmathresult = \value{leafer}}
		{
			\setcounter{leafer}{\pgfmathresult}
		}
		{
			\setcounter{leafer}{\pgfmathresult}
			\theleafer
			\ifthenelse{\equal{#5}{}}{\color{black}}{\color{#5}}
			$\mid$$
			\ifthenelse{\equal{#4}{}}{\color{black}}{\color{#4}}
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer = \pgfmathresult}{\pgfmathparse{(Mod(\j,#1))}\pgfmathresult,}
			}$ \par
		}
		
	} \par
	\color{black}
}

\newcommand{\partialStemNleaf}[3]{
	\newcounter{leafer}
	\setcounter{leafer}{-1}
	
	\foreach \xi in #2 {
		\pgfmathparse{int(\xi/#1)}
		\ifthenelse{\pgfmathresult = \value{leafer}}
		{
			\setcounter{leafer}{\pgfmathresult}
		}
		{
			\setcounter{leafer}{\pgfmathresult}
			\theleafer
			$\mid$$
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer =\pgfmathresult}
				{
					\pgfmathparse{int(ceil(Mod(\j,#1)*#3))}
					\ifthenelse{\pgfmathresult < 5}
					{
						\pgfmathresult,
					}{}
				}
			}$ \par
			\theleafer
			$\mid$$
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer =\pgfmathresult}
				{
					\pgfmathparse{int(ceil(Mod(\j,#1)*#3))}
					\ifthenelse{\pgfmathresult > 4}
					{
						\pgfmathresult,
					}{}
				}
			}$ \par
		}
		
	} \par
}


\newcommand{\fivePinsStemNleaf}[3]{
	\newcounter{leafer}
	\setcounter{leafer}{-1}
	
	\foreach \xi in #2 {
		\pgfmathparse{int(\xi/#1)}
		\ifthenelse{\pgfmathresult = \value{leafer}}
		{
			\setcounter{leafer}{\pgfmathresult}
		}
		{
			\setcounter{leafer}{\pgfmathresult}
			\theleafer*
			$\mid$$
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer =\pgfmathresult}
				{
					\pgfmathparse{int(ceil(Mod(\j,#1)*#3))}
					\ifthenelse{\pgfmathresult < 2}
					{
						\pgfmathresult,
					}{}
				}
			}$ \par
			t\space\space\space    
			$\mid$$ 
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer =\pgfmathresult}
				{
					\pgfmathparse{int(ceil(Mod(\j,#1)*#3))}
					\ifthenelse{\pgfmathresult < 4}
					{
						\ifthenelse{\pgfmathresult > 1}
						{
							\pgfmathresult,
						}{}
					}{}
				}
			}$ \par
			f\space\space\space    
			$\mid$$
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer =\pgfmathresult}
				{
					\pgfmathparse{int(ceil(Mod(\j,#1)*#3))}
					\ifthenelse{\pgfmathresult < 6}
					{
						\ifthenelse{\pgfmathresult > 3}
						{
							\pgfmathresult,
						}{}
					}{}
				}
			}$ \par
			s\space\space\space
			$\mid$$
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer =\pgfmathresult}
				{
					\pgfmathparse{int(ceil(Mod(\j,#1)*#3))}
					\ifthenelse{\pgfmathresult < 8}
					{
						\ifthenelse{\pgfmathresult > 5}
						{
							\pgfmathresult,
						}{}
					}{}
				}
			}$ \par
			\theleafer \space\space\space
			$\mid$$
			\foreach \j in #2 {
				\pgfmathparse{int(\j/#1)}
				\ifthenelse{\theleafer =\pgfmathresult}
				{
					\pgfmathparse{int(ceil(Mod(\j,#1)*#3))}
					\ifthenelse{\pgfmathresult > 7}
					{
						\pgfmathresult,
					}{}
				}
			}$ \par
		}
		
	} \par
}

\begin{document}
	
	\section{Stem and Leaf plot project}
	
	\paragraph{History: }
		A stem-and-leaf display is a device for presenting quantitative data in a graphical format, similar to a histogram, to assist in visualizing the shape of a distribution. They evolved from Arthur Bowley's work in the early 1900s, and are useful tools in exploratory data analysis. 
	
		Stemplots became more commonly used in the 1980s after the publication of John Tukey's book on exploratory data analysis in 1977.
		
	\paragraph{Stem-and-leaf types}
	
	This is an ordinary stem and leaf plot developed by John tukey
	
	\stemNleaf{10}{{1.1,2.2,3,4,5,6,7,8,9,10,11,12,17,20,22,25,29,31,43,50}}{1}{blue}{red}{green}
	
	
	This is fractional stem and leaf, used when your data contains fractional numbers. \newline
	
	\fractionalStemNleaf{1}{{0.0,0.1,0.1,0.2,0.3,0.5,0.5,0.6,1.0,1.1,1.2,1.2,1.7,1.80,1.80,1.9,2.0,2.2,2.3,2.5,3,4,5,6,7,8,9}}{blue}{red}{green}
	
	And when you want to threshold every stem you have you can use this type of stems plot to divide each stem with a given threshold.
	
	\partialStemNleaf{10}{{1,2,3,4,5,6,7,8,9,10,11,12,17,20,22,25,29,31,43,50}}{1}
	
	This type Tukey talked about in his book, by dividing stem and leaf plot into five bins he made the plot more resistant againest huge numeric datasets
	
	\fivePinsStemNleaf{10}{{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,43,50}}{1}

\end{document}
